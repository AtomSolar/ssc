ssc_var("file_name", "C:/sam/2011.12.2/exelib/climate_files/TX Abilene.tm2");

ssc_var("tilt", 20);
ssc_var("azimuth", 180);
ssc_var("derate", 0.77);
ssc_var("system_size", 4);
ssc_var("track_mode", 0);

function sumoutput(name, scale)
{
	sum = 0;
	data = ssc_var(name);
	for (j=0;j<#data;j++)
		sum = sum+data[j];
	return sum*scale;
}


x = [];
y = [];

sum = 324;

for (tilt=10;tilt<90;tilt = tilt+10)
{
	ssc_var("tilt", tilt);
	out("running tilt="+ tilt);
	ssc_run("pvwattsv1");
	
	val = sumoutput("ac", 0.001);
	x[ #x ] = #x-1;
	y[ #y ] = val;
	outln("  ac (kWh)=" + val);	
	
	
}

outln("sum = " + sum);

plot(x,y, {'thick'=10, 'type'='scatter', 'color'=[15,115,140] });
plotopt({'title'='Annual output as function of tilt'});
axis('x1', {'label'='tilt angle (deg)'});
axis('y1', {'label'='annual energy (kWh)'});
plotpng( 'c:/users/adobos/desktop/myplot.png' );

//outln( ssc_var("ac") );

x = [[1,3,4],[1,5,6]];

y = [4,4,6,2,1,56];
ssc_var("matrix",  x);
ssc_var("xby", y);

outln( ssc_var("file_name"));
outln( ssc_var("matrix"));
outln( x );
outln( ssc_var("xby") );